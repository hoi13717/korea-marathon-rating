<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RunStandard | ëŸ°ìŠ¤íƒ ë‹¤ë“œ - ê³µì •í•œ ëŒ€íšŒ ìš´ì˜ì˜ ê¸°ì¤€</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <style>
        :root { --main-color: #e91e63; --bg-color: #f8f9fa; --card-bg: #ffffff; --text-dark: #2c3e50; }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg-color); margin: 0; color: var(--text-dark); line-height: 1.7; }
        
        /* ë„¤ë¹„ê²Œì´ì…˜ ë°” (RunStandard í†µì¼ êµ¬ì¡°) */
        .nav-container { background: white; border-bottom: 1px solid #eee; display: flex; justify-content: center; padding: 12px 0; gap: 15px; position: sticky; top: 0; z-index: 100; }
        .nav-item { text-decoration: none; color: #666; font-size: 0.95rem; font-weight: 600; padding: 10px 20px; border-radius: 25px; transition: 0.3s; }
        .nav-item:hover { background: #ffebee; color: var(--main-color); }
        .nav-item.active { background: var(--main-color); color: white; box-shadow: 0 4px 10px rgba(233, 30, 99, 0.2); }

        /* [ê¸°] Hero ì„¹ì…˜: ë¸Œëœë“œ ì² í•™ ë° ì¹´ìš´íŠ¸ë‹¤ìš´ */
        .hero { background: white; padding: 5rem 1rem; text-align: center; border-bottom: 1px solid #eee; }
        .hero h1 { font-size: 3rem; color: var(--main-color); margin-bottom: 1rem; letter-spacing: -1px; }
        .philosophy { font-size: 1.2rem; color: #555; max-width: 750px; margin: 0 auto 2.5rem; font-weight: 300; }
        .philosophy strong { color: var(--main-color); font-weight: 600; }
        
        .countdown-container { display: inline-block; background: #fff5f7; padding: 25px 50px; border-radius: 20px; border: 2px solid var(--main-color); }
        .countdown-label { font-size: 0.95rem; color: #888; margin-bottom: 8px; }
        .countdown-value { font-size: 2.5rem; font-weight: bold; color: var(--main-color); }

        .container { max-width: 950px; margin: 4rem auto; padding: 0 1.5rem; }
        h2 { font-size: 1.6rem; border-left: 6px solid var(--main-color); padding-left: 18px; margin-bottom: 2.5rem; color: #1a1a1a; }

        /* [ìŠ¹] ë°ì´í„° ê¸°ë°˜ ëŒ€íšŒ í‰ì  */
        .rating-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 6rem; }
        .summary-card { background: var(--card-bg); padding: 2rem; border-radius: 24px; box-shadow: 0 12px 24px rgba(0,0,0,0.04); transition: 0.3s; border: 1px solid #f1f1f1; }
        .summary-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(233, 30, 99, 0.08); }
        .race-name { font-size: 0.9rem; color: #999; font-weight: bold; margin-bottom: 10px; }
        .race-score { font-size: 3rem; font-weight: bold; color: var(--main-color); margin: 5px 0; }

        /* [ì „] ì§€ë„ & ë‚ ì”¨ ì„¹ì…˜ */
        .visual-data-wrapper { display: grid; grid-template-columns: 1.8fr 1fr; gap: 25px; margin-bottom: 6rem; }
        .map-box { background: #eaedf0; border-radius: 24px; display: flex; align-items: center; justify-content: center; min-height: 350px; color: #94a3b8; font-weight: 500; }
        .weather-card { background: white; padding: 25px; border-radius: 24px; border: 1px solid #eee; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }

        /* [ê²°] ë‰´ìŠ¤ ë¦¬ìŠ¤íŠ¸ */
        .news-container { display: grid; gap: 18px; }
        .news-card { background: white; padding: 18px 25px; border-radius: 16px; border: 1px solid #eee; text-decoration: none; color: inherit; display: flex; justify-content: space-between; align-items: center; transition: 0.2s; }
        .news-card:hover { border-color: var(--main-color); background: #fffafb; }

        /* í‘¸í„°: ë…ë¦½ì„± ë° ì •ë³´ ê³µì§€ */
        footer { background: #f1f3f5; padding: 5rem 1rem; text-align: center; color: #868e96; font-size: 0.9rem; margin-top: 6rem; }
        .footer-brand { font-weight: 800; color: #495057; font-size: 1.2rem; margin-bottom: 15px; letter-spacing: -0.5px; }
        .disclaimer-box { border-top: 1px solid #dee2e6; max-width: 700px; margin: 2.5rem auto 0; padding-top: 2.5rem; color: #adb5bd; line-height: 1.8; font-size: 0.85rem; }
    </style>
</head>
<body>

<nav class="nav-container">
    <a href="index.html" class="nav-item active">í™ˆ</a>
    <a href="rating.html" class="nav-item">ëŒ€íšŒí‰ì </a>
    <a href="schedule.html" class="nav-item">ëŒ€íšŒì¼ì •</a>
    <a href="#" class="nav-item">ë©”ë‰´D</a>
    <a href="#" class="nav-item">ë©”ë‰´E</a>
    <a href="#" class="nav-item">ë©”ë‰´F</a>
</nav>

<section class="hero">
    <h1>RunStandard</h1>
    <p class="philosophy">
        "ìš°ë¦¬ì˜ ê³µì •í•œ í‰ê°€ê°€ ëŒ€íšŒ ìš´ì˜ì˜ <strong>ìƒˆë¡œìš´ í‘œì¤€(Standard)</strong>ì„ ì„¸ì›ë‹ˆë‹¤."<br>
        íˆ¬ëª…í•œ ë°ì´í„° ê³µìœ ë¥¼ í†µí•´ ëŒ€í•œë¯¼êµ­ ëŸ¬ë‹ ë¬¸í™”ì˜ ì§ˆì  ì„±ì¥ì„ ë„ëª¨í•˜ëŠ” ë…ë¦½ í”Œë«í¼ì…ë‹ˆë‹¤.
    </p>
    <div class="countdown-container">
        <div class="countdown-label">2026 ì„œìš¸êµ­ì œë§ˆë¼í†¤ D-Day</div>
        <div class="countdown-value" id="main-timer">D-00</div>
    </div>
</section>

<div class="container">
    <h2>â­ í‘œì¤€ ë°ì´í„°: ìµœê·¼ ëŒ€íšŒ í‰ì  ë¦¬í¬íŠ¸</h2>
    <div class="rating-grid" id="preview-list">
        <div class="summary-card">í‰ì  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìˆìŠµë‹ˆë‹¤...</div>
    </div>

    <h2>ğŸ“ ë ˆì´ìŠ¤ í˜„í™©: ì „êµ­ ëŒ€íšŒ ë¶„í¬ ë° ê¸°ìƒ</h2>
    <div class="visual-data-wrapper">
        <div class="map-box" id="race-map">
            ì§€ë„ë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤ (Kakao/Google Map API ëŒ€ê¸°)
        </div>
        <div class="weather-card">
            <div style="font-size: 0.95rem; color: #adb5bd; margin-bottom: 15px; font-weight: 600;">SEOUL WEATHER</div>
            <div id="weather-text" style="font-size: 1.3rem; font-weight: 800; color: var(--text-dark);">ë°ì´í„° ìˆ˜ì‹  ì¤‘...</div>
        </div>
    </div>

    <h2>ğŸ“° ëŸ°ìŠ¤íƒ ë‹¤ë“œ ì¸ì‚¬ì´íŠ¸: ìµœì‹  ì†Œì‹</h2>
    <div class="news-container">
        <a href="#" class="news-card">
            <span style="font-weight: 600;">ğŸƒâ€â™‚ï¸ [ë¦¬í¬íŠ¸] 2026 ìƒë°˜ê¸° ë©”ì´ì € ëŒ€íšŒ ìš´ì˜ íŠ¸ë Œë“œ ë¶„ì„</span>
            <span style="font-size: 0.8rem; color: #adb5bd;">2026.01.15</span>
        </a>
        <a href="#" class="news-card">
            <span style="font-weight: 600;">ğŸ‘Ÿ [ê°€ì´ë“œ] ê³µì •í•œ ë ˆì´ìŠ¤ë¥¼ ìœ„í•œ ëŸ¬ë„ˆì˜ ì—í‹°ì¼“ 5ê°€ì§€</span>
            <span style="font-size: 0.8rem; color: #adb5bd;">2026.01.14</span>
        </a>
    </div>
</div>

<footer>
    <div class="footer-brand">RunStandard - Marathon Standard Project</div>
    <p>Â© 2026 RunStandard. All rights reserved.</p>
    <div class="disclaimer-box">
        RunStandardëŠ” íŠ¹ì • ê¸°ì—…ì´ë‚˜ ë‹¨ì²´ë¡œë¶€í„° ì–´ë– í•œ ì§€ì›ë„ ë°›ì§€ ì•ŠëŠ” <strong>ìˆœìˆ˜ ê°œì¸ í”„ë¡œì íŠ¸</strong>ì…ë‹ˆë‹¤.<br>
        ë³¸ ì‚¬ì´íŠ¸ì˜ ëª¨ë“  ë°ì´í„°ì™€ ì˜ê²¬ì€ ìš´ì˜ìì˜ ê°œì¸ì ì¸ ë¶„ì„ ê²°ê³¼ì´ë©°, <strong>ê·¸ ì–´ë–¤ ê¸°ê´€ì˜ ê³µì‹ ì…ì¥ê³¼ë„ ë¬´ê´€í•¨</strong>ì„ ë°í™ë‹ˆë‹¤.
    </div>
</footer>

<script>
    // config.jsì—ì„œ ì„¤ì •ëœ ê³µí†µ CONFIG ê°ì²´ ì‚¬ìš©
    const _supabase = supabase.createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_KEY);

    // 1. ëª©í‘œ ëŒ€íšŒ ì¹´ìš´íŠ¸ë‹¤ìš´ (2026-03-15 ì„œìš¸ë§ˆë¼í†¤)
    function runTimer() {
        const goalDate = new Date('2026-03-15T09:00:00');
        const now = new Date();
        const gap = goalDate - now;
        const d = Math.floor(gap / (1000 * 60 * 60 * 24));
        document.getElementById('main-timer').innerText = d > 0 ? `D-${d}` : "RACE DAY";
    }

    // 2. Supabaseì—ì„œ í‰ì  ìš”ì•½ ë°ì´í„° 2ê°œ ì¶”ì¶œ
    async function fetchPreviews() {
        const { data, error } = await _supabase.from('reviews').select('*').limit(2);
        const grid = document.getElementById('preview-list');
        
        if (error || !data || data.length === 0) {
            grid.innerHTML = '<p style="color:#adb5bd;">í˜„ì¬ ì¶•ì ëœ í‘œì¤€ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            return;
        }

        grid.innerHTML = data.map(item => `
            <div class="summary-card">
                <div class="race-name">${item.marathon_name}</div>
                <div class="race-score">${item.rating_total}.0</div>
                <div style="font-size:0.9rem; color:#868e96; min-height:3em;">"${item.comment ? item.comment.substring(0, 45) + '...' : 'ê³µì •í•œ ìš´ì˜ì´ ë‹ë³´ì´ëŠ” ëŒ€íšŒì˜€ìŠµë‹ˆë‹¤.'}"</div>
                <div style="margin-top:20px; text-align:right;">
                    <a href="rating.html" style="color:var(--main-color); font-size:0.85rem; text-decoration:none; font-weight:700;">ì „ì²´ ë¦¬í¬íŠ¸ ì½ê¸° ></a>
                </div>
            </div>
        `).join('');
    }

    // 3. ì‹¤ì‹œê°„ ê¸°ìƒ ë°ì´í„° ìˆ˜ì‹ 
    async function loadWeather() {
        try {
            const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Seoul&appid=${CONFIG.WEATHER_KEY}&units=metric&lang=kr`);
            const weatherData = await response.json();
            document.getElementById('weather-text').innerHTML = `ğŸŒ¡ï¸ ${Math.round(weatherData.main.temp)}Â°C | ${weatherData.weather[0].description}`;
        } catch (err) {
            document.getElementById('weather-text').innerText = 'ë°ì´í„° ì¼ì‹œ ì˜¤ë¥˜';
        }
    }

    // ì´ˆê¸° ì‹¤í–‰
    window.onload = () => {
        runTimer();
        fetchPreviews();
        loadWeather();
    };
</script>
</body>
</html>