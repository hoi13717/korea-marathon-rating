<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Didim | í™ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script> <style>
        :root { --main-color: #e91e63; --bg-color: #f8f9fa; --card-bg: #ffffff; }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg-color); margin: 0; color: #333; line-height: 1.7; }
        
        /* í†µì¼ëœ ë„¤ë¹„ê²Œì´ì…˜ */
        .nav-container { background: white; border-bottom: 1px solid #eee; display: flex; justify-content: center; padding: 12px 0; gap: 15px; position: sticky; top: 0; z-index: 100; }
        .nav-item { text-decoration: none; color: #666; font-size: 0.95rem; font-weight: 600; padding: 10px 20px; border-radius: 25px; transition: 0.3s; }
        .nav-item.active { background: var(--main-color); color: white; }

        /* [ê¸°] Hero ì„¹ì…˜ & ì¹´ìš´íŠ¸ë‹¤ìš´ */
        .hero { background: white; padding: 5rem 1rem; text-align: center; border-bottom: 1px solid #eee; }
        .hero h1 { font-size: 2.8rem; color: var(--main-color); margin-bottom: 1rem; }
        .philosophy { font-size: 1.15rem; color: #555; max-width: 700px; margin: 0 auto 2.5rem; }
        .countdown-container { display: inline-block; background: #fff5f7; padding: 20px 40px; border-radius: 20px; border: 2px solid var(--main-color); }
        .countdown-label { font-size: 0.9rem; color: #888; margin-bottom: 5px; }
        .countdown-value { font-size: 2.2rem; font-weight: bold; color: var(--main-color); }

        .container { max-width: 900px; margin: 4rem auto; padding: 0 1.5rem; }
        h2 { font-size: 1.5rem; border-left: 6px solid var(--main-color); padding-left: 15px; margin-bottom: 2rem; }

        /* [ìŠ¹] ë‹¤ê°€ì˜¬ ëŒ€íšŒ í‰ì  ë¯¸ë¦¬ë³´ê¸° */
        .rating-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-bottom: 5rem; }
        .summary-card { background: var(--card-bg); padding: 1.8rem; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); transition: 0.3s; }
        .summary-card:hover { transform: translateY(-5px); }
        .race-name { font-size: 0.85rem; color: #999; font-weight: bold; }
        .race-score { font-size: 2.5rem; font-weight: bold; color: var(--main-color); margin: 10px 0; }

        /* [ì „] ì§€ë„ & ë‚ ì”¨ ì˜ì—­ */
        .map-weather-wrapper { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 5rem; }
        .map-placeholder { background: #e9ecef; border-radius: 20px; display: flex; align-items: center; justify-content: center; min-height: 300px; color: #adb5bd; }
        .weather-side { background: white; padding: 20px; border-radius: 20px; border: 1px solid #eee; display: flex; flex-direction: column; justify-content: center; align-items: center; }

        /* [ê²°] ë‰´ìŠ¤ ì„¹ì…˜ */
        .news-list { display: grid; gap: 15px; }
        .news-item { background: white; padding: 15px 20px; border-radius: 12px; border: 1px solid #eee; text-decoration: none; color: inherit; display: flex; justify-content: space-between; }
        .news-item:hover { border-color: var(--main-color); }

        /* í‘¸í„° (ë…ë¦½ì„± ëª…ì‹œ) */
        footer { background: #f1f3f5; padding: 4rem 1rem; text-align: center; color: #888; font-size: 0.85rem; }
        .disclaimer { border-top: 1px solid #dee2e6; margin-top: 2rem; padding-top: 2rem; color: #adb5bd; line-height: 1.8; }
    </style>
</head>
<body>

<nav class="nav-container">
    <a href="index.html" class="nav-item active">í™ˆ</a>
    <a href="rating.html" class="nav-item">ëŒ€íšŒí‰ì </a>
    <a href="schedule.html" class="nav-item">ëŒ€íšŒì¼ì •</a>
    <a href="#" class="nav-item">ë©”ë‰´D</a>
    <a href="#" class="nav-item">ë©”ë‰´E</a>
    <a href="#" class="nav-item">ë©”ë‰´F</a>
</nav>

<section class="hero">
    <h1>Didim : ë””ë”¤</h1>
    <p class="philosophy">
        "ìš°ë¦¬ì˜ ì†”ì§í•œ ëª©ì†Œë¦¬ê°€ ëª¨ì—¬, ë” ë‚˜ì€ ëŒ€íšŒë¥¼ ë§Œë“­ë‹ˆë‹¤."<br>
        Didimì€ ëŸ¬ë„ˆë“¤ì´ ì§ì ‘ ì°¸ì—¬í•˜ì—¬ êµ­ë‚´ ëŸ¬ë‹ ë¬¸í™”ë¥¼ í˜ì‹ í•˜ëŠ” ë…ë¦½ í”Œë«í¼ì…ë‹ˆë‹¤.
    </p>
    <div class="countdown-container">
        <div class="countdown-label">2026 ì„œìš¸êµ­ì œë§ˆë¼í†¤ê¹Œì§€</div>
        <div class="countdown-value" id="main-countdown">D-00</div>
    </div>
</section>

<div class="container">
    <h2>â­ ë¯¸ë¦¬ ë³´ëŠ” ë‹¤ìŒ ë‹¬ ëŒ€íšŒ í‰ì </h2>
    <div class="rating-grid" id="preview-ratings">
        <div class="summary-card">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
    </div>

    <h2>ğŸ“ í•œ ë‹¬ ì´ë‚´ ëŒ€íšŒ ë° ê¸°ìƒ ì •ë³´</h2>
    <div class="map-weather-wrapper">
        <div class="map-placeholder">ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤ (Kakao/Google Map API ëŒ€ê¸°)</div>
        <div class="weather-side" id="weather-info">
            <div style="font-size: 0.9rem; color: #888; margin-bottom: 10px;">ì˜¤ëŠ˜ì˜ ì„œìš¸ ë‚ ì”¨</div>
            <div id="weather-display" style="font-size: 1.2rem; font-weight: bold;">ë¡œë”© ì¤‘...</div>
        </div>
    </div>

    <h2>ğŸ“° ëŸ¬ë‹ ìµœì‹  íŠ¸ë Œë“œ</h2>
    <div class="news-list">
        <a href="#" class="news-item"><span>ğŸƒâ€â™‚ï¸ 2026ë…„ ë§ˆë¼í†¤ ëŒ€íšŒ ì ‘ìˆ˜ ëŒ€ë€, í•´ê²°ì±…ì€ ì—†ì„ê¹Œ?</span> <span>2026.01.15</span></a>
        <a href="#" class="news-item"><span>ğŸ‘Ÿ ì¹´ë³¸í™” ì‹ ìœ¼ë©´ ì •ë§ ë¹¨ë¼ì§ˆê¹Œ? ë°ì´í„° ë¶„ì„ ê²°ê³¼</span> <span>2026.01.14</span></a>
    </div>
</div>

<footer>
    <div style="font-weight: bold; color: #666; margin-bottom: 10px;">Didim - Run for Better Culture</div>
    <p>Â© 2026 Didim. All rights reserved.</p>
    <div class="disclaimer">
        ë³¸ í”Œë«í¼ì€ ìš´ì˜ìì˜ ìˆœìˆ˜í•œ ê°œì¸ í”„ë¡œì íŠ¸ë¡œ ìš´ì˜ë©ë‹ˆë‹¤.<br>
        <strong>ìš´ì˜ìì˜ ì†Œì† íšŒì‚¬(ì‚¼ì–‘ì‹í’ˆ)ì˜ ê³µì‹ ì˜ê²¬ì´ë‚˜ ì‚¬ì—…ê³¼ëŠ” ì–´ë– í•œ ê´€ë ¨ë„ ì—†ìŒ</strong>ì„ ëª…í™•íˆ ë°í™ë‹ˆë‹¤.
    </div>
</footer>

<script>
    // config.jsì˜ CONFIG ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ˆê¸°í™”
    const _supabase = supabase.createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_KEY);

    // 1. ì¹´ìš´íŠ¸ë‹¤ìš´ (2026-03-15 ì„œìš¸ë§ˆë¼í†¤ ê¸°ì¤€)
    function setCountdown() {
        const target = new Date('2026-03-15T09:00:00');
        const now = new Date();
        const diff = target - now;
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        document.getElementById('main-countdown').innerText = days > 0 ? `D-${days}` : "ëŒ€íšŒ ë‹¹ì¼!";
    }

    // 2. ìƒìœ„ í‰ì  ëŒ€íšŒ 2ê°œ ë¯¸ë¦¬ë³´ê¸°
    async function loadPreview() {
        const { data, error } = await _supabase.from('reviews').select('*').limit(2);
        const grid = document.getElementById('preview-ratings');
        
        if (error || !data || data.length === 0) {
            grid.innerHTML = '<p>í˜„ì¬ ë“±ë¡ëœ í‰ì  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            return;
        }

        grid.innerHTML = data.map(rev => `
            <div class="summary-card">
                <div class="race-name">${rev.marathon_name}</div>
                <div class="race-score">${rev.rating_total}.0</div>
                <div style="font-size:0.85rem; color:#666;">"ìš´ì˜ì§„ì˜ ë°°ë ¤ê°€ ë‹ë³´ì¸ ìµœê³ ì˜ ë ˆì´ìŠ¤"</div>
                <div style="margin-top:15px; text-align:right;">
                    <a href="rating.html" style="color:var(--main-color); font-size:0.8rem; text-decoration:none; font-weight:bold;">ìƒì„¸ ë¦¬ë·° ë³´ê¸° ></a>
                </div>
            </div>
        `).join('');
    }

    // 3. ë‚ ì”¨ ì—°ë™
    async function getHomeWeather() {
        try {
            const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Seoul&appid=${CONFIG.WEATHER_KEY}&units=metric&lang=kr`);
            const data = await res.json();
            document.getElementById('weather-display').innerHTML = `ğŸŒ¡ï¸ ${Math.round(data.main.temp)}Â°C | ${data.weather[0].description}`;
        } catch (e) {
            document.getElementById('weather-display').innerText = 'ë‚ ì”¨ ì •ë³´ ì˜¤ë¥˜';
        }
    }

    window.onload = () => {
        setCountdown();
        loadPreview();
        getHomeWeather();
    };
</script>
</body>
</html>